package com.serverless.models;

import java.util.Date;

import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAttribute;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAutoGeneratedKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBIgnore;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTable;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.serverless.utils.DateUtils;

import lombok.Data;
import lombok.EqualsAndHashCode;

/**
 * Todoアイテムクラス
 */
@Data
@EqualsAndHashCode(callSuper = false)
@DynamoDBTable(tableName = "TodoItem")
public class TodoItem extends ModelBase {

    /**
     * ID
     */
    @DynamoDBHashKey
    @DynamoDBAutoGeneratedKey
    private String id;

    /**
     * タイトル
     */
    @DynamoDBAttribute
    private String title;

    /**
     * 内容
     */
    @DynamoDBAttribute
    private String contents;


    /**
     * 有効期限(UnixTime)
     */
    @JsonIgnore
    @DynamoDBAttribute
    private long expiredTime;

    /**
     * 有効期限を取得
     * @return 
     */
    @DynamoDBIgnore
    public Date getExpiredDate(){
        return DateUtils.toLocalDatetime(expiredTime);
    }

    /**
     * 有効期限を保存
     */
    @DynamoDBIgnore
    public void setExpiredDate(Date value){
        expiredTime = DateUtils.toTimeInMillis(value);
    }

    /**
     * 完了フラグ
     */
    @DynamoDBAttribute
     private boolean isCompleted;


    @Override
    public long getCreateTime() {
        return super.getCreateTime();
    }

    @Override
    public long getUpdateTime() {
        return super.getUpdateTime();
    }

}